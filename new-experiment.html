<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Smoother Scrolling Example</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    height: 5000px; 
    background: linear-gradient(to bottom, #f0f0f0, #ccc);
    display: flex;
    flex-direction: column;
    align-items: center;
    /* If desired, you can experiment with a CSS-based smooth scroll for anchor links:
       html {
         scroll-behavior: smooth;
       }
    */
  }

  .text-container {
    margin-top: 10vh; 
    text-align: center;
  }

  .big-title {
    font-size: 48px;
    font-weight: bold;
    margin-bottom: 20px;
  }

  .subtitles-row {
    display: flex;
    justify-content: center;
    gap: 40px; 
    max-width: 80%;
    margin: 0 auto;
  }

  .subtitle {
    font-size: 24px;
    flex: 1;
    max-width: 200px;
  }

  /* Image scaling section */
  .image-container {
    margin-top: 50vh; 
    display: flex;
    justify-content: center;
    align-items: center;
    transform-origin: center center;
  }

  .image-container img {
    width: 200px;
    height: auto;
    display: block;
  }

  .content {
    position: relative;
    top: 180vh; 
    text-align: center;
    font-size: 24px;
    color: #333;
  }

  /* Horizontal gallery styles */
  .gallery-section {
    position: relative;
    width: 100vw;
    margin-top: 150vh; 
  }

  .gallery-container {
    width: 100vw; 
    overflow: hidden; 
    border: 2px solid #000; 
    position: relative;
  }

  .gallery-track {
    display: flex;
    width: 2500px; /* 5 images * 500px each */
    will-change: transform; /* For smoother performance */
  }

  .gallery-track img {
    width: 500px;
    height: auto;
    display: block;
    user-select: none;
  }

  .gallery-content-below {
    margin-top: 200vh; 
    text-align: center;
    font-size: 24px;
    color: #333;
  }
</style>
</head>
<body>

<div class="text-container">
  <div class="big-title">Lorem Ipsum Dolor Sit Amet</div>
  <div class="subtitles-row">
    <div class="subtitle">Lorem ipsum dolor</div>
    <div class="subtitle">Consectetur adipiscing</div>
    <div class="subtitle">Elit sed do eiusmod</div>
  </div>
</div>

<!-- Scaling image section -->
<div class="image-container">
  <img src="https://picsum.photos/800?random=10" alt="Centered Image">
</div>

<!-- Horizontal scrolling gallery section -->
<div class="gallery-section">
  <div class="gallery-container">
    <div class="gallery-track">
      <img src="https://picsum.photos/500?random=1" alt="Gallery Image 1">
      <img src="https://picsum.photos/500?random=2" alt="Gallery Image 2">
      <img src="https://picsum.photos/500?random=3" alt="Gallery Image 3">
      <img src="https://picsum.photos/500?random=4" alt="Gallery Image 4">
      <img src="https://picsum.photos/500?random=5" alt="Gallery Image 5">
    </div>
  </div>
</div>

<div class="gallery-content-below">
  <p>Youâ€™ve finished scrolling through the horizontal gallery. More content here...</p>
</div>

<!-- Include GSAP and ScrollTrigger -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<script>
  gsap.registerPlugin(ScrollTrigger);

  // SCALE IMAGE SECTION
  gsap.to(".image-container img", {
    scrollTrigger: {
      trigger: ".image-container",
      start: "top center",
      end: "+=1000", 
      pin: true,
      scrub: true,
      anticipatePin: 1, // Helps smooth out the pinning/unpinning
      markers: false
    },
    scale: 2
  });

  // HORIZONTAL GALLERY SECTION
  const galleryWidth = 2500; // width of .gallery-track
  const viewportWidth = window.innerWidth; 
  const horizontalScrollDistance = galleryWidth - viewportWidth; 

  // We'll map a comfortable vertical scroll distance to ensure smoother transitions.
  // For a 1500px horizontal move, we might allow around 2000px vertical scroll (adjust as needed).
  const verticalScrollSpan = horizontalScrollDistance * 1.3; 

  gsap.to(".gallery-track", {
    x: -horizontalScrollDistance,
    ease: "none", // Keep the motion linear with scroll
    scrollTrigger: {
      trigger: ".gallery-section",
      start: "top center",
      end: "+=" + verticalScrollSpan,
      pin: true,
      scrub: true,
      anticipatePin: 1, // Reduce jumpiness at start/end
      markers: false
    }
  });
</script>

</body>
</html>
